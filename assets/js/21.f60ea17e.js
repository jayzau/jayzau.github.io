(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{373:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("公司发展需要，开始学习PHP。")]),e._v(" "),s("h2",{attrs:{id:"安装环境过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装环境过程"}},[e._v("#")]),e._v(" 安装环境过程")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("安装依赖")])])]),e._v(" "),s("p",[e._v("这一项很重要，最开始我准备编译的时候再根据报错来选择性安装依赖，试过之后发现是真的麻烦。还是一步到位吧。")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" gcc "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" openssl "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" libbz2-dev libxml2-dev libjpeg-dev libpng-dev libfreetype6-dev libzip-dev libssl-dev libmcrypt-dev autoconf automake m4 libsqlite3-dev libonig-dev\n")])])]),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://www.php.net/downloads",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网下载需要的源码"),s("OutboundLink")],1)])]),e._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.php.net/manual/zh/install.unix.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("编译安装"),s("OutboundLink")],1)])])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.php.net/manual/zh/configure.about.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("参数选项在这"),s("OutboundLink")],1),e._v("，根据需要的选项配置。")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("./configure "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--prefix")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/local/php --with-config-file-path"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/local/php --enable-mbstring --with-openssl --enable-ftp --with-gd --with-jpeg-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr --with-png-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr --with-mysql"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mysqlnd --with-mysqli"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mysqlnd --with-pdo-mysql"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mysqlnd --with-pear --enable-sockets --with-freetype-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr --with-zlib --with-libxml-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr --with-xmlrpc --enable-zip --enable-fpm --enable-xml --enable-sockets --with-gd --with-zlib --with-iconv --enable-zip --with-freetype-dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/lib/ --enable-soap --enable-pcntl --enable-cli --with-curl\n")])])]),s("p",[e._v("我是在网上Copy的，应该比较通用吧。编译过程中可能会报一些依赖包的错，根据报错装上对应依赖再重新编译就行了。")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("// configure: error: Cannot "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("find")]),e._v(" OpenSSL's "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("evp.h"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" autoconf g++ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" openssl libssl-dev libcurl4-openssl-dev\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" libcurl4-openssl-dev pkg-config\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" libsasl2-dev\n// configure: error: jpeglib.h not found.\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" libjpeg-dev\n")])])]),s("p",[e._v("以上是错误示例。")]),e._v(" "),s("p",[e._v("成功编译后会感谢你使用PHP。")]),e._v(" "),s("blockquote",[s("p",[e._v("Thank you for using PHP.")])]),e._v(" "),s("ul",[s("li",[s("p",[s("em",[e._v("make && make install")])])]),e._v(" "),s("li",[s("p",[e._v("安装完成")])])]),e._v(" "),s("p",[e._v("这时候试试"),s("code",[e._v("/usr/local/php/bin/php -v")]),e._v("应该就会打印出来版本信息。")]),e._v(" "),s("p",[e._v("想在任何路径都能调用php，加个软链。")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ln")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" /usr/local/php/bin/php /usr/bin/php\n")])])]),s("h2",{attrs:{id:"php-fpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-fpm"}},[e._v("#")]),e._v(" php-fpm")]),e._v(" "),s("p",[e._v("暂时没弄懂是干嘛的。")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://express.iefoam.com/detail?id=551&uId=zBRIkgKKSsGNMwtU8VriLVmpn2gdutzJ",target:"_blank",rel:"noopener noreferrer"}},[e._v("朋友php7.4的安装过程"),s("OutboundLink")],1),e._v("带得有，以后用到了再写吧。")]),e._v(" "),s("hr"),e._v(" "),s("h2",{attrs:{id:"后续"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后续"}},[e._v("#")]),e._v(" 后续")]),e._v(" "),s("p",[s("strong",[e._v("关于"),s("code",[e._v("php-fpm")])])]),e._v(" "),s("p",[e._v("个人理解"),s("code",[e._v("php-fpm")]),e._v("就是用来解析"),s("code",[e._v("php")]),e._v("脚本的。不做相关配置的话，"),s("code",[e._v("php")]),e._v("文件就仅仅只是个普通文件。")]),e._v(" "),s("p",[s("strong",[e._v("关于扩展安装")])]),e._v(" "),s("p",[e._v("在编译安装"),s("code",[e._v("php")]),e._v("的参数选项步骤的时候就可以安装部分扩展。但是像"),s("code",[e._v("xdebug")]),e._v("扩展就不行，需要手动安装配置。")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://xdebug.org/wizard",target:"_blank",rel:"noopener noreferrer"}},[e._v("xdebug安装"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("img",{attrs:{src:"/images/notes/PHP%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/xdebug_install.png",alt:"xdebug安装过程"}})]),e._v(" "),s("p",[e._v("其实扩展安装都差不多，下包，解包，编译，安装，最后写入配置。")]),e._v(" "),s("p",[e._v("不同的扩展写入的配置不太一样，比如"),s("code",[e._v("xdebug")]),e._v("最后写入的是"),s("code",[e._v("zend_extension = /usr/local/php/lib/php/extensions/no-debug-zts-20190902/xdebug.so")]),e._v("，而"),s("code",[e._v("redis")]),e._v("写入的是"),s("code",[e._v("extension = /usr/local/php/lib/php/extensions/no-debug-zts-20190902/redis.so")]),e._v("。")]),e._v(" "),s("p",[e._v("变量名不知道有什么规律，看文档最好。后面指向的"),s("code",[e._v("so")]),e._v("文件路径一定要正确就是了。")])])}),[],!1,null,null,null);t.default=n.exports}}]);