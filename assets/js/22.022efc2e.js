(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{376:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"https://www.selenium.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Selenium"),a("OutboundLink")],1),t._v(" 是一个用于Web应用程序测试的工具。Selenium测试直接运行在浏览器中，就像真正的用户在操作一样。")]),t._v(" "),a("p",[t._v("理论上说，只要用户能手动做的事情，都可以通过Selenium来自动化实现。当然，用于数据抓取也可以。“所见即所得”是一件很爽的事情。")]),t._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("blockquote",[a("p",[t._v("系统：Linux")]),t._v(" "),a("p",[t._v("语言：Python")]),t._v(" "),a("p",[t._v("浏览器：Chrome")])]),t._v(" "),a("h3",{attrs:{id:"简单使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单使用"}},[t._v("#")]),t._v(" 简单使用")]),t._v(" "),a("p",[t._v("下载"),a("code",[t._v("selenium")]),t._v("三方包。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" selenium\n")])])]),a("p",[t._v("查看"),a("code",[t._v("Chrome")]),t._v("版本。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("google-chrome "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"http://chromedriver.storage.googleapis.com/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网下载"),a("OutboundLink")],1),t._v("对应版本浏览器驱动。")]),t._v(" "),a("p",[t._v("开始使用。")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"驱动绝对路径"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" browser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    browser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.baidu.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问百度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 防止程序执行完毕浏览器秒关看不到效果")]),t._v("\n")])])]),a("h3",{attrs:{id:"使用docker-selenium-grid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用docker-selenium-grid"}},[t._v("#")]),t._v(" 使用Docker + Selenium Grid")]),t._v(" "),a("blockquote",[a("p",[t._v("If you want to scale by distributing and running tests on several machines and manage multiple environments from a central point, making it easy to run the tests against a vast combination of browsers/OS, then you want to use Selenium Grid.")])]),t._v(" "),a("p",[t._v("有几个好处：")]),t._v(" "),a("ul",[a("li",[t._v("docker-compose 一行命令搭建。方便。")]),t._v(" "),a("li",[t._v("终端不再需要配环境，调用接口就可以操控浏览器。")]),t._v(" "),a("li",[t._v("管理方便，易于扩展。")]),t._v(" "),a("li",[t._v("浏览器类型(火狐、谷歌、欧朋)和版本改改配置想换就换。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/posts/SeleniumGrid/Grid_console.png",alt:"控制台"}})]),t._v(" "),a("p",[t._v("默认系统已安装启动"),a("code",[t._v("Docker")]),t._v("。")]),t._v(" "),a("p",[t._v("安装"),a("code",[t._v("docker-compose")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v("\n")])])]),a("p",[t._v("配置文件：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To execute this docker-compose yml file use `docker-compose -f <file_name> up`")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the `-d` flag at the end for detached execution")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主机(selenium-hub.yaml)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selenium-hub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/hub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hub\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7654:4444"')]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4444端口开不了")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GRID_MAX_SESSION=50\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GRID_NEW_SESSION_WAIT_TIMEOUT=60\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GRID_TIMEOUT=300\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" START_XVFB=false\n\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("chrome")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("xenon\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/shm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/shm\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hub\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_HOST=selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hub\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_INSTANCES=3\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_SESSION=3\n    \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# firefox:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   image: selenium/node-firefox:4.0.0-alpha-6-20200721")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   volumes:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - /dev/shm:/dev/shm")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   depends_on:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - selenium-hub")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   environment:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - HUB_HOST=selenium-hub")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# opera:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   image: selenium/node-opera:4.0.0-alpha-6-20200721")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   volumes:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - /dev/shm:/dev/shm")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   depends_on:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - selenium-hub")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   environment:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - HUB_HOST=selenium-hub")]),t._v("\n")])])]),a("p",[t._v("指定文件启动：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" selenium-hub.yaml up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),a("p",[t._v("多开3个chrome节点：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" selenium-hub.yaml up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scale")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("chrome")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),a("p",[t._v("扩容配置(另一台服务器)：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To execute this docker-compose yml file use `docker-compose -f <file_name> up`")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the `-d` flag at the end for detached execution")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从机(selenium-node.yaml)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("chrome-node1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要几个写几个")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("xenon\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stdin_open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/shm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/shm\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7200:5555"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_HOST=127.0.0.1    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主机IP")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_PORT=7654         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主机端口")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_INSTANCES=5\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_SESSION=5\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" REMOTE_HOST=http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从机IP  端口同 ports")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GRID_TIMEOUT=300\n\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("chrome-node2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" selenium/node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3.141.59"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("xenon\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stdin_open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/shm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/dev/shm\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7201:5555"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_HOST=127.0.0.1\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" HUB_PORT=7654\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_INSTANCES=5\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" NODE_MAX_SESSION=5\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" REMOTE_HOST=http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7201")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GRID_TIMEOUT=300\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# firefox:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   image: selenium/node-firefox:4.0.0-alpha-6-20200721")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   volumes:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - /dev/shm:/dev/shm")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   depends_on:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - selenium-hub")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   environment:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - HUB_HOST=selenium-hub")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# opera:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   image: selenium/node-opera:4.0.0-alpha-6-20200721")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   volumes:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - /dev/shm:/dev/shm")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   depends_on:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - selenium-hub")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   environment:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     - HUB_HOST=selenium-hub")]),t._v("\n")])])]),a("p",[t._v("指定文件启动：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" selenium-node.yaml up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),a("p",[t._v("关闭：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" selenium-hub.yaml down\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" selenium-node.yaml down\n")])])]),a("p",[t._v("使用：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Options    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Chrome")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desired_capabilities "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" DesiredCapabilities\n\n\nchrome_options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndesired_capabilities "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" DesiredCapabilities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CHROME\ncommand_executor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://{IP}:{PORT}/wd/hub'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("IP"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PORT"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Remote"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    command_executor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("command_executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    desired_capabilities"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("desired_capabilities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" browser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    browser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.baidu.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问百度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("browser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page_source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("由于浏览器运行在服务器上，所以界面是看不见的。")]),t._v(" "),a("p",[t._v("镜像"),a("code",[t._v("selenium/node-chrome-debug")]),t._v("可以使用VNC连接查看界面。")]),t._v(" "),a("p",[t._v("或者利用"),a("code",[t._v("get_screenshot_as_png()")]),t._v("方法来查看截图。")]),t._v(" "),a("p",[t._v("Github地址："),a("a",{attrs:{href:"https://github.com/SeleniumHQ/docker-selenium",target:"_blank",rel:"noopener noreferrer"}},[t._v("Selenium Docker"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"一些谷歌浏览器参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些谷歌浏览器参数"}},[t._v("#")]),t._v(" 一些谷歌浏览器参数")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Options\nchrome_options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--proxy-server=http://ip:port'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 代理")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--no-sandbox'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最高权限启动（服务器）")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--start-maximized'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大化打开")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--disable-gpu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一些博文说防止出BUG")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user-agent=Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) '")]),t._v("\n                            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Chrome/73.0.3683.86 Safari/537.36'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求头")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--headless'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 无头浏览器（不显示界面）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这俩不是无头设了也没用")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'window-size=1920x1080'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lang=zh_CN.UTF-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这俩是无头设了也没用（开发者选项）")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_experimental_option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'excludeSwitches'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--enable-automation'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_experimental_option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'useAutomationExtension'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desired_capabilities "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" DesiredCapabilities\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于查看 Network 记录")]),t._v("\ndesired_capabilities "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" DesiredCapabilities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CHROME\ndesired_capabilities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"loggingPrefs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'performance'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ALL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nchrome_options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_experimental_option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'w3c'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# browser.get_log("performance")')]),t._v("\n")])])]),a("hr"),t._v(" "),a("p",[t._v("挺好的。")]),t._v(" "),a("p",[t._v("如果能保持浏览器打开状态，每次请求可以复用的话，就更好了。")]),t._v(" "),a("p",[t._v("再学学吧。")])])}),[],!1,null,null,null);s.default=e.exports}}]);