(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{381:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"权限认证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限认证"}},[t._v("#")]),t._v(" 权限认证")]),t._v(" "),n("p",[t._v("假设需要验证用户的权限：")]),t._v(" "),n("ol",[n("li",[t._v("手机")]),t._v(" "),n("li",[t._v("邮箱")]),t._v(" "),n("li",[t._v("实名")]),t._v(" "),n("li",[t._v("发帖")]),t._v(" "),n("li",[t._v("评论")]),t._v(" "),n("li",[t._v("...")])]),t._v(" "),n("p",[t._v("设定用户初始权限："),n("code",[t._v("0(0000 0000 0000 0000)")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("权限")]),t._v(" "),n("th",[t._v("值")]),t._v(" "),n("th",[t._v("二进制")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("手机")]),t._v(" "),n("td",[t._v("1")]),t._v(" "),n("td",[t._v("0000 0000 0000 0001")])]),t._v(" "),n("tr",[n("td",[t._v("邮箱")]),t._v(" "),n("td",[t._v("2")]),t._v(" "),n("td",[t._v("0000 0000 0000 0010")])]),t._v(" "),n("tr",[n("td",[t._v("实名")]),t._v(" "),n("td",[t._v("4")]),t._v(" "),n("td",[t._v("0000 0000 0000 0100")])]),t._v(" "),n("tr",[n("td",[t._v("发帖")]),t._v(" "),n("td",[t._v("8")]),t._v(" "),n("td",[t._v("0000 0000 0000 1000")])]),t._v(" "),n("tr",[n("td",[t._v("评论")]),t._v(" "),n("td",[t._v("16")]),t._v(" "),n("td",[t._v("0000 0000 0001 0000")])]),t._v(" "),n("tr",[n("td",[t._v("...")]),t._v(" "),n("td",[t._v("32")]),t._v(" "),n("td",[t._v("0000 0000 0010 0000")])])])]),t._v(" "),n("h5",{attrs:{id:"权限计算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#权限计算"}},[t._v("#")]),t._v(" 权限计算")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Permissions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    phone "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    email "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    authentication "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n    post "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n    comment "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify_permission")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('""" 按位与 &: 相同位的两个数字都为1，则为1；若有一个不为1，则为0。\n      0000 0000 0000 0001\n    & 0000 0000 0000 0110\n    ---------------------\n      0000 0000 0000 0000\n    """')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_permission")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" verify_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""按位或 |: 相同位只要一个为1即为1。\n      0000 0000 0000 0001\n    | 0000 0000 0000 0110\n    ---------------------\n      0000 0000 0000 0111\n    """')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" permission\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("del_permission")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" verify_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""按位异或 ^: 相同位不同则为1，相同则为0。\n          0000 0000 0000 0001\n        ^ 0000 0000 0000 0101\n        ---------------------\n          0000 0000 0000 0100\n        """')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" permission\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    user_permission "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    user_permission "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" add_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Permissions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# >>> add_permission(0, 1) >>> 0 | 1 >>> 1")]),t._v("\n    user_permission "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" add_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Permissions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# >>> add_permission(1, 2) >>> 1 | 2 >>> 3")]),t._v("\n    user_permission "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" del_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user_permission"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Permissions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# >>> del_permission(3, 1) >>> 3 ^ 1 >>> 2")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);